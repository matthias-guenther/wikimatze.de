<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Getting started with RSpec Puppet</title>
  <meta name="author" content="Matthias Günther" >
  <meta name="description" content="Testing your server manifests give you confidence in your server"> 
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <link href="http://fonts.googleapis.com/css?family=Droid+Sans:400,700" rel="stylesheet">

  <link href="/css/bootstrap.css" rel="stylesheet" media="screen, projection">
  <link href="/css/bootstrap-responsive.css" rel="stylesheet" media="screen, projection">
  <link href="/css/base.css" rel="stylesheet" media="screen, projection">
  <link href="/css/pygments.css" rel="stylesheet" media="screen, projection">

  <link href="http://feeds.feedburner.com/guenther" rel="alternate" type="application/rss+xml" title="RSS feed of Matthias Günther">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>

<body>
  <div class="container">
    <div class="row-fluid">
      <div class="span12">
        <div class="span5">
          <span id="title">
            <a href="/index.html">wikimatze</a>
          </span>
        </div>
        <div class="span7">
          <nav>
            <ul class="nav nav-pills">
              <li><a href="http://feeds.feedburner.com/guenther" target="_blank"><img src="/images/rss.png" alt="RSS"></a></li>
              <li><a href="https://twitter.com/wikimatze" target="_blank"><img src="/images/twitter.png" alt="Twitter"></a></li>
              <li><a href="https://github.com/matthias-guenther" target="_blank"><img src="/images/github.png" alt="GitHub"></a></li>
              <li><a href="/about.html">About</a></li>
              <li><a href="/talks.html">Talks</a></li>
              <li><a href="/projects.html">Projects</a></li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
<!--
    <div id="ribbon">
      <a href="https://github.com/matthias-guenther" target="_blank">Fork me on Github</a>
    </div>
    -->

    <div class="row-fluid">
      <div class="span10 offset1">
        
        <header><h1>Getting started with RSpec Puppet</h1></header>
        
        <article class="post">
  <header>
    <div class="author">
      Posted on <time datetime="2012-09-27" pubdate>2012-09-27</time>
    </div>
    <div class="right">
  <a href="https://twitter.com/share" class="twitter-share-button" data-count="none" data-via="wikimatze">Tweet</a>
    <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
  <a href="http://twitter.com/wikimatze" class="twitter-follow-button" data-show-count="false">Follow wikimatze</a>
    <script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
</div>


    <div class="clearer"></div>
  </header>
  <div class="clearer"></div>
  <blockquote>
  <p>You never improve if you can't change at all.</p>
  <strong>Tom DeMarco</strong>
</blockquote>


<p>Writing your service configuration with Puppet can be easy. But when it comes to debugging, it can be very difficult to
edit things and to find certain errors. This article presents your the basic of setting up your environment for testing
Puppet modules in a BDD way.</p>

<h2>The tools</h2>

<p>The <a href="https://rubygems.org/gems/rspec-puppet/">rspec-puppet gem</a> is the
<a href="http://docs.rubygems.org/read/chapter/1#page22">Gem</a> setup to get started. It install the <code>rspec-puppet-init</code> command
which automatically sets up the basic settings for testing. As a text tool we want to use
<a href="http://rubygems.org/gems/puppet-lint/">puppet-lint</a>: This tool checks your Puppet manifests against the Puppet Labs
style guide and alert you to any discrepancies => you have now your constant feedback loop when writing code.</p>

<p>Run the following commands to install the gem:</p>

<div class="highlight"><pre><code class="bash"><span class="nv">$ </span>gem install rspec-puppet
<span class="nv">$ </span>gem install puppet-lint
</code></pre></div>


<p>You can use <code>puppet-lint</code> in your terminal to check a puppet manifest.</p>

<div class="highlight"><pre><code class="bash"><span class="nv">$ </span>puppet-lint &lt;path-to-your-manifest&gt;
</code></pre></div>


<p>Let&rsquo;s assume, we have the following puppet file:</p>

<div class="highlight"><pre><code class="ruby"><span class="c1"># manifests/init.pp</span>

<span class="k">class</span> <span class="ss">git</span><span class="p">:</span><span class="ss">:init</span> <span class="p">{</span>
 <span class="kp">include</span> <span class="ss">git</span><span class="p">::</span> <span class="n">package</span>
<span class="p">}</span>
</code></pre></div>


<p>If we run <code>puppet-lint</code> on it:</p>

<div class="highlight"><pre><code class="bash"><span class="nv">$ </span>puppet-lint manifests/init.pp
ERROR: two-space soft tabs not used on line 10
WARNING: unquoted resource title on line 10
</code></pre></div>


<h2>Setting up the environment</h2>

<p>The next step is to clone the <em>puppet boilerplate</em> repository. It&rsquo;s perfekt for creating a initial skeletton for a new
module .  After we get the code, we run a script which guides you through the process of creating a new module:</p>

<div class="highlight"><pre><code class="bash"><span class="nv">$ </span>git clone git://github.com/bitkollektiv/puppet-boilerplate-modules.git
<span class="nv">$ </span>./puppet-boilerplate-modules/newmodule.sh
</code></pre></div>


<p>Answer the questions in this dialog, that means select the module name, the template for it (<em>0: application-001</em> is
perfect for the beginning), the location, and the author. When your are done with this, go into the directory of your
new module and perform the following cleanup commands:</p>

<div class="highlight"><pre><code class="bash"><span class="nv">$ </span><span class="nb">cd</span> &lt;your-module-path&gt;
<span class="nv">$ </span>rm COPYING CREDITS Modulefile NOTICE README
<span class="nv">$ </span>rm -rf files/ templates/
</code></pre></div>


<p>The cleanup is necessary to get you focused on the basics of testing (of course documentation, README, and so on are
important but not when you are going to learn something new). Now, your file structure should look like the following.</p>

<pre><code>`-- manifests
    |-- init.pp
    |-- package.pp
    `-- params.pp
</code></pre>

<p>This structure follows the <strong>package, config, and service</strong> (okay, we have <code>params.pp</code> instead of <code>service.pp</code> but this
not bad because the module we create in this example isn&rsquo;t a service) pattern as mentioned by R.I.Pienaar <a href="http://www.devco.net/archives/2009/09/28/simple_puppet_module_structure.php">blog
post</a>.</p>

<p>The last step is to run <code>rspec-puppet-init</code> in the directory of your module and it will create all the files for
testing.</p>

<div class="highlight"><pre><code class="bash"><span class="nv">$ </span><span class="nb">cd</span> &lt;your-module-path&gt;
<span class="nv">$ </span>rspec-puppet-init
 + spec/
 + spec/classes/
 + spec/defines/
 + spec/functions/
 + spec/hosts/
 + spec/fixtures/
 + spec/fixtures/manifests/
 + spec/fixtures/modules/
 + spec/fixtures/modules/git/
 + spec/fixtures/manifests/site.pp
 + spec/fixtures/modules/git/manifests
 + spec/spec_helper.rb
 + Rakefile
</code></pre></div>


<p>And the file structure should be the following:</p>

<pre><code>|-- manifests
|   |-- init.pp
|   |-- package.pp
|   `-- params.pp
|-- Rakefile
`-- spec
    |-- classes
    |-- defines
    |-- fixtures
    |   |-- manifests
    |   |   `-- site.pp
    |   `-- modules
    |       `-- git
    |           `-- manifests -&gt; ../../../../manifests
    |-- functions
    |-- hosts
    `-- spec_helper.rb
</code></pre>

<p>The symlinks in the <code>spec/</code> directory are linking the manifests folder into your spec folder, so that they are in the
runpath of your specs when you run <code>rspec</code>.</p>

<h2>Testing, testing, and testing</h2>

<p>First, we want to test that the class <code>git::package</code> is created in <code>manifests/init.pp</code> manifests. All we need to do is
to create a spec named <code>init_spec.rb</code> in the <code>spec/classes</code> directory. To make it testable, we need to define a scope
for our <code>init.pp</code> manifest</p>

<div class="highlight"><pre><code class="ruby"><span class="c1"># manifests/init.pp</span>

<span class="k">class</span> <span class="ss">git</span><span class="p">:</span><span class="ss">:init</span> <span class="p">{</span>
  <span class="k">class</span> <span class="p">{</span> <span class="s1">&#39;git::package&#39;</span><span class="p">:</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>


<p>Let&rsquo;s do the test for it:</p>

<div class="highlight"><pre><code class="ruby"><span class="c1"># spec/classes/init_spec.pp</span>

<span class="nb">require</span> <span class="s1">&#39;spec_helper&#39;</span>

<span class="n">describe</span> <span class="s2">&quot;git::init&quot;</span> <span class="k">do</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">create_class</span><span class="p">(</span><span class="s1">&#39;git::packagee&#39;</span><span class="p">)}</span>
<span class="k">end</span>
</code></pre></div>


<p>Now it&rsquo;s time to run our test: (<strong>Remember to run <code>rake spec</code> always from the root directory of your module)</strong></p>

<div class="highlight"><pre><code class="bash"><span class="nv">$ </span><span class="nb">cd</span> &lt;your-module-path&gt;
<span class="nv">$ </span>rake spec
/home/helex/.rbenv/versions/1.9.2-p320/bin/ruby -S rspec spec/classes/init_spec.rb

git::init
  should contain Class<span class="o">[</span>git::packagee<span class="o">]</span> <span class="o">(</span>FAILED - 1<span class="o">)</span>

Failures:

  1<span class="o">)</span> git::init
     Failure/Error: it <span class="o">{</span> should create_class<span class="o">(</span><span class="s1">&#39;git::packagee&#39;</span><span class="o">)}</span>
       expected that the catalogue would contain Class<span class="o">[</span>git::packagee<span class="o">]</span>
     <span class="c"># ./spec/classes/init_spec.rb:4:in `block (2 levels) in &lt;top (required)&gt;&#39;</span>

Finished in 0.05637 seconds
1 example, 1 failure

Failed examples:

rspec ./spec/classes/init_spec.rb:4 <span class="c"># git::init</span>
</code></pre></div>


<p><a href="http://farm9.staticflickr.com/8291/7804199724_37c12fbbc0_b.jpg" title="Prevention of bad code with tests." class="fancybox"><img src="http://farm8.staticflickr.com/8291/7804199724_37c12fbbc0_z.jpg" class="center" alt="Prevention of bad code with tests."/></a></p>

<div class="caption">Prevention of bad code with tests.</div>


<p>Duh, it&rsquo;s red, what should we do? The catalogue does not contain a class <code>git::packagee</code>. Gosh, it&rsquo;s just a typo in our
<code>init_spec.rb</code> file. Let&rsquo;s fix this:</p>

<div class="highlight"><pre><code class="ruby"><span class="c1"># spec/classes/init_spec.pp</span>

<span class="nb">require</span> <span class="s1">&#39;spec_helper&#39;</span>

<span class="n">describe</span> <span class="s2">&quot;git::init&quot;</span> <span class="k">do</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">create_class</span><span class="p">(</span><span class="s1">&#39;git::package&#39;</span><span class="p">)}</span>
<span class="k">end</span>
</code></pre></div>


<p>And run our tests again:</p>

<div class="highlight"><pre><code class="bash"><span class="nv">$ </span>rake spec
/home/helex/.rbenv/versions/1.9.2-p320/bin/ruby -S rspec spec/classes/init_spec.rb

git::init
  should contain Class<span class="o">[</span>git::package<span class="o">]</span>

Finished in 0.03963 seconds
1 example, 0 failures
</code></pre></div>


<p>It&rsquo;s green and running &ndash; perfect.</p>

<h2>Testing the creation of a package with a type</h2>

<p>Since we are now sure, that the <code>package</code> manifests is integrated, it&rsquo;s time to write a test, that we have the
<code>git-core</code> package in our package manifests. Let&rsquo;s write <code>spec/classes/install_spec.rb</code>:</p>

<div class="highlight"><pre><code class="ruby"><span class="c1"># spec/classes/package_spec.pp</span>

<span class="nb">require</span> <span class="s1">&#39;spec_helper&#39;</span>

<span class="n">describe</span> <span class="s1">&#39;git::package&#39;</span> <span class="k">do</span>

  <span class="n">context</span> <span class="s1">&#39;install git-core&#39;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">contain_package</span><span class="p">(</span><span class="s1">&#39;git-core&#39;</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="k">end</span>

<span class="k">end</span>
</code></pre></div>


<p>The <code>contains_&lt;resource&gt;</code> <em>matcher</em> will test if the manifest contains a particular puppet resource.</p>

<p>And run the tests again with <code>rake spec</code> form the root directory of your module:</p>

<div class="highlight"><pre><code class="bash"><span class="nv">$ </span>rake spec
/home/helex/.rbenv/versions/1.9.2-p320/bin/ruby -S rspec spec/classes/package_spec.rb spec/classes/init_spec.rb

git::package
  install git-core
    should contain Package<span class="o">[</span>git-core<span class="o">]</span> <span class="o">(</span>FAILED - 1<span class="o">)</span>

git::init
  should contain Class<span class="o">[</span>git::package<span class="o">]</span>

Failures:

  1<span class="o">)</span> git::package install git-core
     Failure/Error: it <span class="o">{</span> should contain_package<span class="o">(</span><span class="s1">&#39;git-core&#39;</span><span class="o">)</span>
       expected that the catalogue would contain Package<span class="o">[</span>git-core<span class="o">]</span>
     <span class="c"># ./spec/classes/package_spec.rb:6:in `block (3 levels) in &lt;top (required)&gt;&#39;</span>

Finished in 0.19843 seconds
2 examples, 1 failure

Failed examples:

rspec ./spec/classes/package_spec.rb:6 <span class="c"># git::package install git-core</span>
</code></pre></div>


<p>Let&rsquo;s edit <code>manifests/package.pp</code> file:</p>

<div class="highlight"><pre><code class="ruby"><span class="c1"># manifests/package.pp</span>

<span class="k">class</span> <span class="ss">git</span><span class="p">:</span><span class="ss">:package</span> <span class="p">{</span>
  <span class="n">package</span> <span class="p">{</span> <span class="s1">&#39;git-core&#39;</span><span class="p">:}</span>
<span class="p">}</span>
</code></pre></div>


<p>And run the tests again:</p>

<div class="highlight"><pre><code class="bash"><span class="nv">$ </span>rake spec
/home/helex/.rbenv/versions/1.9.2-p320/bin/ruby -S rspec spec/classes/package_spec.rb spec/classes/init_spec.rb

git::package
  install git-core
    should contain Package<span class="o">[</span>git-core<span class="o">]</span>

git::init
  should contain Class<span class="o">[</span>git::package<span class="o">]</span>

Finished in 0.19894 seconds
2 examples, 0 failures
</code></pre></div>


<p>Next we want to add the <strong>ensure</strong> attribute to the get the latest version of the <code>git-core package</code>. Let&rsquo;s write a
failing test first:</p>

<div class="highlight"><pre><code class="ruby"><span class="c1"># spec/classes/package_spec.pp</span>

<span class="nb">require</span> <span class="s1">&#39;spec_helper&#39;</span>

<span class="n">describe</span> <span class="s1">&#39;git::package&#39;</span> <span class="k">do</span>

  <span class="n">context</span> <span class="s1">&#39;install git-core&#39;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">contain_package</span><span class="p">(</span><span class="s1">&#39;git-core&#39;</span><span class="p">)</span>
         <span class="o">.</span><span class="n">with_ensure</span><span class="p">(</span><span class="s1">&#39;latest&#39;</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="k">end</span>

<span class="k">end</span>
</code></pre></div>


<p>The <code>with_*</code> and <code>without_*</code> <em>matcher</em> can test the presence or absence of the parameter of resources. Run our tests, to
see they are failing:</p>

<div class="highlight"><pre><code class="bash"><span class="nv">$ </span>rake spec
/home/helex/.rbenv/versions/1.9.2-p320/bin/ruby -S rspec spec/classes/package_spec.rb spec/classes/init_spec.rb

git::package
  install git-core
    should contain Package<span class="o">[</span>git-core<span class="o">]</span> with <span class="nv">ensure</span> <span class="o">=</span>&gt; <span class="s2">&quot;latest&quot;</span> <span class="o">(</span>FAILED - 1<span class="o">)</span>

git::init
  should contain Class<span class="o">[</span>git::package<span class="o">]</span>

Failures:

  1<span class="o">)</span> git::package install git-core
     Failure/Error: .with_ensure<span class="o">(</span><span class="s1">&#39;latest&#39;</span><span class="o">)</span>
       expected that the catalogue would contain Package<span class="o">[</span>git-core<span class="o">]</span> with ensure <span class="nb">set </span>to <span class="sb">`</span><span class="s2">&quot;latest&quot;</span><span class="sb">`</span> but it is <span class="nb">set </span>to <span class="sb">`</span>nil<span class="sb">`</span> in the catalogue
     <span class="c"># ./spec/classes/package_spec.rb:7:in `block (3 levels) in &lt;top (required)&gt;&#39;</span>

Finished in 0.19862 seconds
2 examples, 1 failure

Failed examples:

rspec ./spec/classes/package_spec.rb:6 <span class="c"># git::package install git-core</span>
</code></pre></div>


<p>Time to fix it:</p>

<div class="highlight"><pre><code class="ruby"><span class="c1"># manifests/package.pp</span>

<span class="k">class</span> <span class="ss">git</span><span class="p">:</span><span class="ss">:package</span> <span class="p">{</span>
  <span class="n">package</span> <span class="p">{</span> <span class="s1">&#39;git-core&#39;</span><span class="p">:</span>
    <span class="k">ensure</span> <span class="o">=&gt;</span> <span class="n">latest</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>


<p>If we run now our tests again, it should work:</p>

<div class="highlight"><pre><code class="bash"><span class="nv">$ </span>rake spec
/home/helex/.rbenv/versions/1.9.2-p320/bin/ruby -S rspec spec/classes/package_spec.rb spec/classes/init_spec.rb

git::package
  install git-core
    should contain Package<span class="o">[</span>git-core<span class="o">]</span> with <span class="nv">ensure</span> <span class="o">=</span>&gt; <span class="s2">&quot;latest&quot;</span>

git::init
  should contain Class<span class="o">[</span>git::package<span class="o">]</span>

Finished in 0.20456 seconds
2 examples, 0 failures
</code></pre></div>


<p>If you have problems with understanding the syntax of RSpec, just checkout the
<a href="http://pragprog.com/book/achbd/the-rspec-book">&ldquo;The RSpec Book&rdquo;</a> by David Chelimsky.</p>

<h2>Refactor</h2>

<p>Since we now have green tests, we can play with the code. Let&rsquo;s make <code>manifests.init.pp</code> nicer:</p>

<div class="highlight"><pre><code class="ruby"><span class="c1"># manifests/init.pp</span>

<span class="k">class</span> <span class="ss">git</span><span class="p">:</span><span class="ss">:init</span> <span class="p">{</span>
  <span class="c1"># don&#39;t like the class declaration syntax: class { &#39;git::package&#39;: }</span>
  <span class="kp">include</span> <span class="ss">git</span><span class="p">:</span><span class="ss">:package</span> <span class="c1"># much better</span>
<span class="p">}</span>
</code></pre></div>


<p>Run the test:</p>

<div class="highlight"><pre><code class="bash"><span class="nv">$ </span>rake spec
/home/helex/.rbenv/versions/1.9.2-p320/bin/ruby -S rspec spec/classes/package_spec.rb spec/classes/init_spec.rb

git::package
  install git-core
    should contain Package<span class="o">[</span>git-core<span class="o">]</span> with <span class="nv">ensure</span> <span class="o">=</span>&gt; <span class="s2">&quot;latest&quot;</span>

git::init
  should contain Class<span class="o">[</span>git::package<span class="o">]</span>

Finished in 0.20158 seconds
2 examples, 0 failures
</code></pre></div>


<p>Your catalogue is still valid. Have beer because you have written your first tests for puppet and refactored your first
manifest.</p>

<h2>Conclusion</h2>

<p>Testing is important &ndash; even or especially with the environment settings for your systems. It take some time to get used
to it and you will find it in the beginning very cumbersome to write the code double. But when you are writing 4000
lines of code long manifest you will be happy to have structure, and confidence in your code with ya lovely tests.</p>

<p>Testing is good and saves your ass, especially the but of your company!</p>

<h2>Further reading</h2>

<ul>
<li><a href="http://rspec-puppet.com/">rspec-puppet page</a></li>
<li><a href="http://puppet-lint.com/">puppet-lint page</a></li>
<li><a href="http://bombasticmonkey.com/">Tim Sharp &ndash; author of rspec-puppet and puppet-lint</a></li>
<li><a href="http://docs.puppetlabs.com/puppet_core_types_cheatsheet.pdf">Puppet core type cheatsheet</a></li>
</ul>


  <aside>
    You can write a comment below or <a href="http://wikimatze.wufoo.com/forms/z7x3x5/">send me an email</a>.
    <br />
    <div class="whoring">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'wikimatze'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>


  </aside>
</article>


      </div>
    </div>

    <footer>
      <nav>
        &copy; Matthias Günther
        &bull;
        <a href="/contact.html">contact</a>
        &bull;
        <a href="/follow.html">follow</a>
        &bull;
        <a href="/reading.html">books</a>
        &bull;
        <a rel="nofollow" href="/imprint.html">imprint</a>
        &bull;
        <a rel="nofollow" href="/colophon.html">colophon</a>
        &bull;
        <a rel="nofollow" href="/donate.html">surprise me</a>
        <span id="last-build">last build: 5-7-2013</span>
      </nav>
    </footer>
  </div> <!-- container-centered-->

  <!-- jQuery library -->
  <script type="text/javascript" src="/js/jquery-1.9.0.min.js"></script>

  <!-- Add fancyBox -->
  <link rel="stylesheet" href="/js/fancybox/source/jquery.fancybox.css?v=2.1.4" type="text/css" media="screen" />
  <script type="text/javascript" src="/js/fancybox/source/jquery.fancybox.pack.js?v=2.1.4"></script>

  <!-- Optionally add helpers - button, thumbnail and/or media -->
  <link rel="stylesheet" href="/js/fancybox/source/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen" />
  <script type="text/javascript" src="/js/fancybox/source/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
  <script type="text/javascript" src="/js/fancybox/source/helpers/jquery.fancybox-media.js?v=1.0.5"></script>

  <link rel="stylesheet" href="/js/fancybox/source/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen" />
  <script type="text/javascript" src="/js/fancybox/source/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
  <script type="text/javascript">
    $(document).ready(function() {
        $(".fancybox").fancybox(
          {
          wrapCSS    : 'fancybox-custom',
          closeClick : true,

          helpers : {
            title : {
              type : 'inside'
            },
            overlay : {
              css : {
                'background-color' : '#eee'
              }
            }
          }
        });
     });
   </script>

  <!-- google Analytics -->
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-2870917-2']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>

</body>
</html>
