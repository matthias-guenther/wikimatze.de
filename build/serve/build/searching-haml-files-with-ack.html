<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Searching Haml files with ack</title>
  <meta name="author" content="Matthias Günther" >
  
  <meta name="description" content="Writings, and talks by Matthias Günther. Günther works at MyHammer, loves painting Warhammer figures, and enjoys making cakes.">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <link href="http://fonts.googleapis.com/css?family=Droid+Sans:400,700" rel="stylesheet">

  <link href="/css/bootstrap.css" rel="stylesheet" media="screen, projection">
  <link href="/css/bootstrap-responsive.css" rel="stylesheet" media="screen, projection">
  <link href="/css/base.css" rel="stylesheet" media="screen, projection">
  <link href="/css/pygments.css" rel="stylesheet" media="screen, projection">

  <link href="http://feeds.feedburner.com/guenther" rel="alternate" type="application/rss+xml" title="RSS feed of Matthias Günther">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>

<body>
  <div class="container">
    <div class="row-fluid">
      <div class="span12">
        <div class="span5">
          <span id="title">
            <a href="/index.html">wikimatze</a>
          </span>
        </div>
        <div class="span7">
          <nav>
            <ul class="nav nav-pills">
              <li><a href="http://feeds.feedburner.com/guenther" target="_blank"><img src="/images/rss.png" alt="RSS"></a></li>
              <li><a href="https://twitter.com/wikimatze" target="_blank"><img src="/images/twitter.png" alt="Twitter"></a></li>
              <li><a href="https://github.com/matthias-guenther" target="_blank"><img src="/images/github.png" alt="GitHub"></a></li>
              <li><a href="/about.html">About</a></li>
              <li><a href="/talks.html">Talks</a></li>
              <li><a href="/projects.html">Projects</a></li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
<!--
    <div id="ribbon">
      <a href="https://github.com/matthias-guenther" target="_blank">Fork me on Github</a>
    </div>
    -->

    <div class="row-fluid">
      <div class="span10 offset1">
        
        <header><h1>Searching Haml files with ack</h1></header>
        
        <article class="post">
  <header>
    <div class="author">
      Posted on <time datetime="2012-05-14" pubdate>2012-05-14</time>
    </div>
    <div class="right">
  <a href="https://twitter.com/share" class="twitter-share-button" data-count="none" data-via="wikimatze">Tweet</a>
    <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
  <a href="http://twitter.com/wikimatze" class="twitter-follow-button" data-show-count="false">Follow wikimatze</a>
    <script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
</div>


    <div class="clearer"></div>
  </header>
  <div class="clearer"></div>
  <p><em>This article describes how you can configure your ack settings to search for additionals files.
UPATE: <a href="http://petdance.com/">Andy Lester</a>, the author of ack, give me feedback about this article.</em></p>

<p>Recently I was working on a Rails project and was using Vim with the <code>:Ack &lt;pattern&gt;</code> command to search after a certain
typed string &ldquo;Übreschrift&rdquo; and would like to replace it with the correct version &ldquo;Überschrift&rdquo;. I typed into the console
<code>:Ack Übreschrift</code> and I couldn&rsquo;t find a single match. What went wrong?</p>

<h2>Questions to answer</h2>

<p>Why couldn&rsquo;t I find the file with that content? Was I in the wrong directory? No:</p>

<pre><code>$pwd
-&gt; $HOME/git-repositories/brokenlifts
</code></pre>

<p>Did I used the wrong pattern? No, I searched after the right word &ldquo;Übreschrift&rdquo;. Did I used the wrong command?  No, I
tried <code>ack-grep</code> in the terminal to search for other common words like <em>test</em> or <em>string</em> and could only find results in
<em>.rb, </em>.js files but not in <code>*.html.haml</code> files. Tada, found the mistake, <code>ack</code> is per default not configured to include
these very special file types. If your press <code>ack -f</code> (thanks <a href="http://petdance.com/">Andy Lester</a> for this note) you
will get the output of all files ack will go through &ndash; and this command didn&rsquo;t displayed <code>*.html.haml</code> files.</p>

<h2>Solve problems .ackrc</h2>

<p>I created the <code>$HOME/.ackrc</code> and added the entries to include these special filename:</p>

<div class="highlight"><pre><code class="sh">--type-add
<span class="nv">html</span><span class="o">=</span>.html.haml
</code></pre></div>


<p>Now my search worked and I got hits in <code>*.html.haml</code> files for searching the term &ldquo;Übreschrift&rdquo;.</p>

<h2>Further refinements</h2>

<p>Since I&rsquo;m working with Rails there are other file types like <code>sass, erb, less, scss, ..</code> I would like to include into
the search:</p>

<div class="highlight"><pre><code class="sh">--type-add
<span class="nv">html</span><span class="o">=</span>.html.erb,.html.haml,.haml
--type-add
<span class="nv">css</span><span class="o">=</span>.sass,.less,.scss
</code></pre></div>


<p>And there might be directories I don&rsquo;t want to have in my search path. Let&rsquo;s ignore them and speed up our search:</p>

<div class="highlight"><pre><code class="sh">--type-set
<span class="nv">ignorables</span><span class="o">=</span>.log,.tmp,.pdf
--ignore-dir<span class="o">=</span>vendor
--ignore-dir<span class="o">=</span>log
--ignore-dir<span class="o">=</span>tmp
--ignore-dir<span class="o">=</span>doc
--ignore-dir<span class="o">=</span>coverage
</code></pre></div>


<p>If you would like to see the specified files for your grep environment search, just use <code>ack --help types</code> &ndash; this will
print all information you need. Here is an example:</p>

<div class="highlight"><pre><code class="sh"><span class="nv">$ </span>ack --help <span class="nv">types</span>
<span class="o">=</span>&gt;
  --<span class="o">[</span>no<span class="o">]</span>actionscript .as .mxml
  --<span class="o">[</span>no<span class="o">]</span>ada          .ada .adb .ads
  --<span class="o">[</span>no<span class="o">]</span>asm          .asm .s
  --<span class="o">[</span>no<span class="o">]</span>batch        .bat .cmd
  --<span class="o">[</span>no<span class="o">]</span>binary       Binary files, as defined by Perl<span class="s1">&#39;s -B op (default: off)</span>
<span class="s1">  --[no]cc           .c .h .xs</span>
<span class="s1">  --[no]cfmx         .cfc .cfm .cfml</span>
<span class="s1">  --[no]cpp          .cpp .cc .cxx .m .hpp .hh .h .hxx</span>
<span class="s1">  --[no]csharp       .cs</span>
<span class="s1">  --[no]css          .css .sass .less .scss</span>
<span class="s1">  --[no]elisp        .el</span>
<span class="s1">  --[no]erlang       .erl .hrl</span>
<span class="s1">  --[no]fortran      .f .f77 .f90 .f95 .f03 .for .ftn .fpp</span>
<span class="s1">  --[no]haskell      .hs .lhs</span>
<span class="s1">  --[no]hh           .h</span>
<span class="s1">  --[no]html         .htm .html .shtml .xhtml .html.erb .html.haml .haml</span>
<span class="s1">  --[no]ignorables   .log .tmp .pdf</span>
<span class="s1">  --[no]java         .java .properties</span>
<span class="s1">  --[no]js           .js</span>
<span class="s1">  --[no]jsp          .jsp .jspx .jhtm .jhtml</span>
<span class="s1">  --[no]lisp         .lisp .lsp</span>
<span class="s1">  --[no]lua          .lua</span>
<span class="s1">  --[no]make         Makefiles</span>
<span class="s1">  --[no]mason        .mas .mhtml .mpl .mtxt</span>
<span class="s1">  --[no]objc         .m .h</span>
<span class="s1">  --[no]objcpp       .mm .h</span>
<span class="s1">  --[no]ocaml        .ml .mli</span>
<span class="s1">  --[no]parrot       .pir .pasm .pmc .ops .pod .pg .tg</span>
<span class="s1">  --[no]perl         .pl .pm .pod .t</span>
<span class="s1">  --[no]php          .php .phpt .php3 .php4 .php5 .phtml</span>
<span class="s1">  --[no]plone        .pt .cpt .metadata .cpy .py</span>
<span class="s1">  --[no]python       .py</span>
<span class="s1">  --[no]rake         Rakefiles</span>
<span class="s1">  --[no]ruby         .rb .rhtml .rjs .rxml .erb .rake</span>
<span class="s1">  --[no]scala        .scala</span>
<span class="s1">  --[no]scheme       .scm .ss</span>
<span class="s1">  --[no]shell        .sh .bash .csh .tcsh .ksh .zsh</span>
<span class="s1">  --[no]skipped      Files, but not directories, normally skipped by ack (default: off)</span>
<span class="s1">  --[no]smalltalk    .st</span>
<span class="s1">  --[no]sql          .sql .ctl</span>
<span class="s1">  --[no]tcl          .tcl .itcl .itk</span>
<span class="s1">  --[no]tex          .tex .cls .sty</span>
<span class="s1">  --[no]text         Text files, as defined by Perl&#39;</span>s -T op <span class="o">(</span>default: off<span class="o">)</span>
  --<span class="o">[</span>no<span class="o">]</span>tt           .tt .tt2 .ttml
  --<span class="o">[</span>no<span class="o">]</span>vb           .bas .cls .frm .ctl .vb .resx
  --<span class="o">[</span>no<span class="o">]</span>vim          .vim
  --<span class="o">[</span>no<span class="o">]</span>xml          .xml .dtd .xslt .ent
  --<span class="o">[</span>no<span class="o">]</span>yaml         .yaml .yml
</code></pre></div>


<h2>Further reading</h2>

<ul>
<li><a href="http://betterthangrep.com/">ack</a></li>
</ul>


  <aside>
    You can write a comment below or <a href="http://wikimatze.wufoo.com/forms/z7x3x5/">send me an email</a>.
    <br />
    <div class="whoring">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'wikimatze'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>


  </aside>
</article>


      </div>
    </div>

    <footer>
      <nav>
        &copy; Matthias Günther
        &bull;
        <a href="/contact.html">contact</a>
        &bull;
        <a href="/follow.html">follow</a>
        &bull;
        <a href="/reading.html">books</a>
        &bull;
        <a rel="nofollow" href="/imprint.html">imprint</a>
        &bull;
        <a rel="nofollow" href="/colophon.html">colophon</a>
        &bull;
        <a rel="nofollow" href="/donate.html">surprise me</a>
        <span id="last-build">last build: 5-7-2013</span>
      </nav>
    </footer>
  </div> <!-- container-centered-->

  <!-- jQuery library -->
  <script type="text/javascript" src="/js/jquery-1.9.0.min.js"></script>

  <!-- Add fancyBox -->
  <link rel="stylesheet" href="/js/fancybox/source/jquery.fancybox.css?v=2.1.4" type="text/css" media="screen" />
  <script type="text/javascript" src="/js/fancybox/source/jquery.fancybox.pack.js?v=2.1.4"></script>

  <!-- Optionally add helpers - button, thumbnail and/or media -->
  <link rel="stylesheet" href="/js/fancybox/source/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen" />
  <script type="text/javascript" src="/js/fancybox/source/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
  <script type="text/javascript" src="/js/fancybox/source/helpers/jquery.fancybox-media.js?v=1.0.5"></script>

  <link rel="stylesheet" href="/js/fancybox/source/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen" />
  <script type="text/javascript" src="/js/fancybox/source/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
  <script type="text/javascript">
    $(document).ready(function() {
        $(".fancybox").fancybox(
          {
          wrapCSS    : 'fancybox-custom',
          closeClick : true,

          helpers : {
            title : {
              type : 'inside'
            },
            overlay : {
              css : {
                'background-color' : '#eee'
              }
            }
          }
        });
     });
   </script>

  <!-- google Analytics -->
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-2870917-2']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>

</body>
</html>
